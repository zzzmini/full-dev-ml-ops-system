# ğŸš´ ë”°ë¦‰ì´ ì‹¤ì‹œê°„ ì˜ˆì¸¡ + RAG í†µí•© ì‹œìŠ¤í…œ

> DevOps + MLOps + AI Fullstack í”„ë¡œì íŠ¸

![Python](https://img.shields.io/badge/Python-3.11-blue?logo=python)
![FastAPI](https://img.shields.io/badge/FastAPI-0.110-green?logo=fastapi)
![Spring Boot](https://img.shields.io/badge/Spring_Boot-3.x-brightgreen?logo=springboot)
![AWS ECS](https://img.shields.io/badge/AWS-ECS_EC2-orange?logo=amazonaws)
![Docker](https://img.shields.io/badge/Docker-Compose-blue?logo=docker)
![Redis](https://img.shields.io/badge/Redis-Cache-red?logo=redis)

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ì„œìš¸ì‹œ ê³µê³µìì „ê±° **ë”°ë¦‰ì´** ë°ì´í„°ë¥¼ í™œìš©í•œ ì‹¤ë¬´í˜• ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

- **ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘** â€” AWS Lambda + Redis
- **10ë¶„ í›„ ìì „ê±° ìˆ˜ ì˜ˆì¸¡** â€” LightGBM/XGBoost + APScheduler
- **RAG ì±—ë´‡** â€” LlamaIndex ê¸°ë°˜ Hybrid Retrieval + Rerank + Citation
- **ê²Œì‹œíŒ ì„œë¹„ìŠ¤** â€” Spring Boot + RDS MySQL
- **ë©€í‹° ì»¨í…Œì´ë„ˆ ìš´ì˜** â€” AWS ECS (EC2 Mode)
- **í†µí•© ëª¨ë‹ˆí„°ë§** â€” Prometheus + Grafana
- **ìë™ ë°°í¬** â€” GitHub Actions + ECR CI/CD

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EC2 (ECS Cluster)                  â”‚
â”‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Frontend â”‚   â”‚ FastAPI  â”‚   â”‚   Spring Boot    â”‚    â”‚
â”‚   â”‚  (Next)  â”‚   â”‚ + ML/RAG â”‚   â”‚   (ê²Œì‹œíŒ)        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚              â”‚                   â”‚              â”‚
â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚        Redis          â”‚    â”‚    RDS MySQL       â”‚     â”‚
â”‚   â”‚   (ì‹¤ì‹œê°„ + ì˜ˆì¸¡ ìºì‹œ)  â”‚    â”‚    (ê²Œì‹œíŒ DB)     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Qdrant  â”‚   â”‚Prometheusâ”‚   â”‚     Grafana       â”‚    â”‚
â”‚   â”‚(Vector DBâ”‚   â”‚          â”‚   â”‚   (ëŒ€ì‹œë³´ë“œ)        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
   â”‚   Lambda   â”‚  â† 5ë¶„ë§ˆë‹¤ ë”°ë¦‰ì´ API ìˆ˜ì§‘ â†’ Redis raw ì €ì¥
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
[ë”°ë¦‰ì´ API]
     â”‚
     â–¼
[Lambda] â”€â”€â†’ Redis (realtime:station:{id})
                  â”‚
                  â–¼
           FastAPI APScheduler
                  â”‚  ML ì¶”ë¡ 
                  â–¼
           Redis (prediction:station:{id})
                  â”‚
                  â–¼
           Frontend ëŒ€ì‹œë³´ë“œ
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| FastAPI | ì‹¤ì‹œê°„ ì¡°íšŒ / ì˜ˆì¸¡ API / RAG |
| Spring Boot | ê²Œì‹œíŒ CRUD API |
| Redis | ì‹¤ì‹œê°„Â·ì˜ˆì¸¡ ë°ì´í„° ìºì‹œ |
| RDS MySQL | ê²Œì‹œíŒ ì˜ì† ë°ì´í„° |
| Qdrant | RAG Vector DB |
| LightGBM / XGBoost | ìì „ê±° ìˆ˜ ì˜ˆì¸¡ ëª¨ë¸ |

### DevOps
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| Docker | ì»¨í…Œì´ë„ˆí™” |
| AWS ECS (EC2 Mode) | ë©€í‹° ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| AWS ECR | ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ |
| AWS Lambda | ë°ì´í„° ìˆ˜ì§‘ íŠ¸ë¦¬ê±° |
| AWS S3 | ML ëª¨ë¸ ì €ì¥ |
| GitHub Actions | CI/CD íŒŒì´í”„ë¼ì¸ |
| Nginx + Certbot | HTTPS ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ |
| Prometheus + Grafana | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ì‹œê°í™” |

### AI
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| LlamaIndex | RAG í”„ë ˆì„ì›Œí¬ |
| BM25 | Sparse Retrieval |
| Hybrid Retrieval | BM25 + Vector ë³‘í•© |
| Rerank | ìƒìœ„ 8ê°œ ë¬¸ì„œ ì •ì œ |
| Citation | ì‘ë‹µ ì¶œì²˜ í‘œì‹œ |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
.
â”œâ”€â”€ frontend/               # Next.js ëŒ€ì‹œë³´ë“œ + ê²Œì‹œíŒ + ì±—ë´‡ UI
â”œâ”€â”€ fastapi/                # FastAPI ì„œë²„
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ realtime.py     # ì‹¤ì‹œê°„ ë°ì´í„° ì¡°íšŒ
â”‚   â”‚   â”œâ”€â”€ predict.py      # ì˜ˆì¸¡ ì¡°íšŒ
â”‚   â”‚   â””â”€â”€ chat.py         # RAG ì±—ë´‡
â”‚   â”œâ”€â”€ scheduler/          # APScheduler ì˜ˆì¸¡ ë£¨í”„
â”‚   â”œâ”€â”€ ml/                 # ëª¨ë¸ ë¡œë”© ë° ì¶”ë¡ 
â”‚   â””â”€â”€ rag/                # LlamaIndex RAG íŒŒì´í”„ë¼ì¸
â”œâ”€â”€ spring/                 # Spring Boot ê²Œì‹œíŒ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ src/main/java/
â”œâ”€â”€ lambda/                 # AWS Lambda ìˆ˜ì§‘ í•¨ìˆ˜
â”œâ”€â”€ ml/                     # ì˜¤í”„ë¼ì¸ ëª¨ë¸ í•™ìŠµ
â”‚   â”œâ”€â”€ train.py
â”‚   â””â”€â”€ upload_s3.py
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ ecs/                # ECS íƒœìŠ¤í¬ ì •ì˜
â”‚   â”œâ”€â”€ prometheus/         # prometheus.yml
â”‚   â””â”€â”€ grafana/            # ëŒ€ì‹œë³´ë“œ JSON
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/          # GitHub Actions CI/CD
â””â”€â”€ docker-compose.yml      # ë¡œì»¬ ê°œë°œìš©
```

---

## ğŸ”‘ Redis í‚¤ ì„¤ê³„

```
# ì‹¤ì‹œê°„ ë°ì´í„° (Lambda ì €ì¥)
realtime:station:{station_id}

# ì˜ˆì¸¡ ë°ì´í„° (FastAPI APScheduler ì €ì¥)
prediction:station:{station_id}
```

---

## ğŸ¤– RAG íŒŒì´í”„ë¼ì¸

```
Query
  â”‚
  â”œâ”€ Query Routing
  â”œâ”€ Multi-query ìƒì„± (3ê°œ)
  â””â”€ Metadata Filter
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
  â”‚  BM25 top20 â”‚  +  â”‚ Vector top20 â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”€â”€ Merge â”€â”€â”€â”€â”€â”˜
                    â”‚
                 Rerank (top 8)
                    â”‚
                  Dedup
                    â”‚
            Citation í¬í•¨ ì‘ë‹µ
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§

| ëŒ€ìƒ | ìˆ˜ì§‘ ë°©ì‹ | ì£¼ìš” ì§€í‘œ |
|------|----------|-----------|
| EC2 | Node Exporter | CPU, Memory, Disk IO, Network |
| FastAPI | `/metrics` (prometheus-fastapi-instrumentator) | RPS, Latency p95, ì¶”ë¡  ì‹œê°„, ì—ëŸ¬ìœ¨ |
| Spring | `/actuator/prometheus` | RPS, DB ì»¤ë„¥ì…˜, ì—ëŸ¬ìœ¨ |
| Redis | redis_exporter | ë©”ëª¨ë¦¬, key ìˆ˜, hit/miss ë¹„ìœ¨ |

---

## ğŸ”„ ML ì¬í•™ìŠµ ì „ëµ

### Phase 1 â€” ì´ˆê¸°
- ì˜¤í”„ë¼ì¸ í•™ìŠµ í›„ S3 ì—…ë¡œë“œ
- FastAPI ê¸°ë™ ì‹œ ëª¨ë¸ ìë™ ë¡œë”©
- `/ai/reload-model` ì—”ë“œí¬ì¸íŠ¸ë¡œ ë¬´ì¤‘ë‹¨ ì¬ë¡œë”©

### Phase 2 â€” í™•ì¥
- ë°ì´í„° ëˆ„ì  í›„ ìˆ˜ë™ ì¬í•™ìŠµ (`/ai/retrain`)
- `model_version.json`ìœ¼ë¡œ ë²„ì „ ê´€ë¦¬
- ì„±ëŠ¥ ë¹„êµ í›„ S3 ìµœì‹  ëª¨ë¸ êµì²´

### í–¥í›„ (ë¬¸ì„œí™” ëª©ì )
- MLflow ë„ì… ë° ìë™ ë²„ì „ ê´€ë¦¬
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê¸°ë°˜ ìë™ ë¡¤ë°± íŒŒì´í”„ë¼ì¸

---

## ğŸš€ CI/CD

```yaml
# GitHub Actions íë¦„
Push to main
    â”‚
    â”œâ”€ Docker Build
    â”œâ”€ ECR Push
    â””â”€ ECS Rolling Update
```

ëŒ€ìƒ ì„œë¹„ìŠ¤: FastAPI / Spring Boot / Frontend

---

## ğŸ“… ê°œë°œ ë¡œë“œë§µ

| Day | ë‚´ìš© |
|-----|------|
| Day 1 | EC2/ECS/ECR/RDS/Redis ì¸í”„ë¼ êµ¬ì„± + ê¸°ë³¸ ì„œë¹„ìŠ¤ ë°°í¬ (ê²Œì‹œíŒ ì™„ì„± í¬í•¨) |
| Day 2 | Lambda â†’ Redis ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ + FastAPI APScheduler ì˜ˆì¸¡ ë£¨í”„ + í”„ë¡ íŠ¸ ì—°ë™ |
| Day 3 | Prometheus/Grafana ëª¨ë‹ˆí„°ë§ + GitHub Actions CI/CD + RAG êµ¬í˜„ |

---

## âœ… ì™„ë£Œ ê¸°ì¤€

- [x] ì‹¤ì‹œê°„ ë°ì´í„° ì •ìƒ ë°˜ì˜
- [x] 10ë¶„ ì˜ˆì¸¡ ìŠ¤ì¼€ì¤„ ì •ìƒ ë™ì‘
- [x] ëª¨ë¸ ì¬ë¡œë”© (`/ai/reload-model`) ê°€ëŠ¥
- [x] ê²Œì‹œíŒ CRUD ì •ìƒ ì‘ë™ (RDS ì—°ê²°)
- [x] RAG ì±—ë´‡ ì¶œì²˜ í¬í•¨ ì‘ë‹µ
- [x] Prometheus/Grafana ì „ì²´ ë©”íŠ¸ë¦­ í™•ì¸
- [x] GitHub Actions ìë™ ë°°í¬ ì„±ê³µ

---

## ğŸ”­ í–¥í›„ í™•ì¥

- ALB ë„ì… ë° Fargate ì „í™˜
- Kafka + Spark ìŠ¤íŠ¸ë¦¬ë° íŒŒì´í”„ë¼ì¸
- Spring Security ì¸ì¦ ì‹œìŠ¤í…œ
- MLflow ìë™ ì¬í•™ìŠµ íŒŒì´í”„ë¼ì¸
- Auto Scaling ì •ì±… ì ìš©